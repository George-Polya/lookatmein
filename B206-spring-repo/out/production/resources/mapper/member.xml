<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
        namespace="com.ssafy.lam.user.model.mapper.UserMapper">

    <resultMap type="User" id="user">
        <result column="member_seq" property="seq" />
        <result column="member_id" property="userId" />
        <result column="member_pw" property="password" />
        <result column="token" property="token" />
    </resultMap>

    <select id="login" parameterType="User" resultMap="user">
        select member_seq, member_id, member_pw, token
        from user
        where member_id=#{userId} and member_pw=#{password}
    </select>

<<<<<<< HEAD:B206-spring-repo/out/production/resources/mapper/member.xml
<!--    <select id="findMemberById" parameterType="string" resultMap="member">-->
<!--        select username, user_id, join_date, address, tel, admin-->
<!--        from member-->
<!--        where user_id = #{userId}-->
<!--    </select>-->

    <select id="findMemberById" parameterType="string" resultMap="customer">
<<<<<<< HEAD
        select seq, id, password, token
=======
        select id
>>>>>>> dev-spring-hayoon
        from customer
        where id = #{id}
=======
    <select id="findMemberByUserId" parameterType="string" resultMap="user">
        select member_seq, member_id
        from user
        where member_id = #{userId}
>>>>>>> dev-spring-hayoon:B206-spring-repo/src/main/resources/mapper/member.xml
    </select>

    <update id="saveRefreshToken" parameterType="map">
        update user
        set token = #{token}
        where member_id = #{userId}
    </update>

<<<<<<< HEAD:B206-spring-repo/out/production/resources/mapper/member.xml


=======
>>>>>>> dev-spring-hayoon:B206-spring-repo/src/main/resources/mapper/member.xml
    <select id="getRefreshToken" parameterType="string" resultType="string">
        select token
        from user
        where member_id = #{userId}
    </select>

    <update id="deleteRefreshToken" parameterType="map">
        update user
        set token = #{token, jdbcType=VARCHAR}
        where member_id = #{userId}
    </update>

    <insert id="saveMember" parameterType="user">
        insert user(seq, userId, password, token)
		values (#{seq},#{userId},#{password},#{token})
    </insert>

    <update id="modifyMember" parameterType="User">
        update user
        SET member_pw=#{password}
        where member_id= #{userId};
    </update>

    <delete id="deleteMember" parameterType="string">
        delete from user
        where member_id = #{userId};
    </delete>


</mapper>